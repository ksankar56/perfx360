<%
    var testExecution = locals.params.testExecution;
    var searchResult = locals.params.searchResult;
 %>

<section id="minimal-statistics">

    <% if (testExecution && searchResult && testExecution.executed) {
        var summary = locals.params.summary;
        console.info('testExecution = ', testExecution);
    %>
        <div class="row">
            <div class="col-lg-12 col-xs-12">
                <div class="card">
                    <div class="card-body">
                        <div class="card-block">
                            <div class="row">
                                <div class="col-lg-3 col-md-6 col-xs-12 border-right-grey border-right-lighten-3">
                                    <div class="float-xs-left pl-1">
                                        <span class="font-large-1 text-bold-200"><%= summary.vu %></span>
                                    </div>
                                    <div class="float-xs-left mt-1 ml-1">
                                        <span class="grey darken-1 block">VU</span>
                                        <span class="grey darken-1 block">Max Users</span>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-xs-12 border-right-grey border-right-lighten-3">
                                    <div class="float-xs-left pl-1">
                                        <span class="font-large-1 text-bold-200"><%= summary.throughput %></span>
                                    </div>
                                    <div class="float-xs-left mt-1 ml-1">
                                        <span class="grey darken-1 block">Hits/s</span>
                                        <span class="grey darken-1 block">Avg. Throughput</span>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-xs-12 border-right-grey border-right-lighten-3">
                                    <div class="float-xs-left pl-21">
                                        <span class="font-large-1 text-bold-200"><%= summary.averageResponseTime %></span>
                                    </div>
                                    <div class="float-xs-left mt-1 ml-1">
                                        <span class="grey darken-1 block">ms</span>
                                        <span class="grey darken-1 block">Avg. Resp. Time</span>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-md-6 col-xs-12">
                                    <div class="float-xs-left pl-1">
                                        <span class="font-large-1 text-bold-200"><%= summary.responseTime %></span>
                                    </div>
                                    <div class="float-xs-left mt-1 ml-1">
                                        <span class="grey darken-1 block">ms</span>
                                        <span class="grey darken-1 block">95% Resp. Time</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xl-6 col-md-12 col-sm-12">
                <div class="card no-border box-shadow-0">
                    <div class="card-body collapse in">
                        <div class="card-footer p-0 no-border">
                            <div class="table-responsive">
                                <table class="table table-bordered mb-0">
                                    <tbody>
                                    <tr>
                                        <td>
                                            <div class="details-left float-xs-left">
                                                <span class="font-small-1 grey text-bold-600 block">DURATION</span>
                                                <span class="text-bold-500"><%= summary.duration %></span>
                                            </div>
                                            <div class="float-xs-right valign-middle">
                                                <i class="icon-ios-timer green lighten-1 font-large-1"></i>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="details-left float-xs-left">
                                                <span class="font-small-1 grey text-bold-600 block">TEST TYPE</span>
                                                <span class="text-bold-500"><%= summary.testType %></span>
                                            </div>
                                            <div class="float-xs-right valign-middle">
                                                <i class="icon-wpforms green lighten-1 font-large-1"></i>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div class="details-left float-xs-left">
                                                <span class="font-small-1 grey text-bold-600 block">STARTED</span>
                                                <span class="text-bold-500"><%= summary.started %></span>
                                            </div>
                                            <div class="float-xs-right valign-middle">
                                                <i class="icon-calendar5 green lighten-1 font-large-1"></i>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="details-left float-xs-left">
                                                <span class="font-small-1 grey text-bold-600 block">ENDED</span>
                                                <span class="text-bold-500"><%= summary.ended %></span>
                                            </div>
                                            <div class="float-xs-right valign-middle">
                                                <i class="icon-calendar5 green lighten-1 font-large-1"></i>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6 col-xs-12">
                <div class="card">
                    <div class="card-body">
                        <div class="card-block">
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-xs-12 border-right-grey border-right-lighten-3">
                                    <div class="float-xs-left pl-1">
                                        <span class="font-large-1 text-bold-200"><%= summary.error %></span>
                                    </div>
                                    <div class="float-xs-left mt-1 ml-1">
                                        <span class="grey darken-1 block">%</span>
                                        <span class="grey darken-1 block">Errors</span>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-xs-12 border-right-grey border-right-lighten-3">
                                    <div class="float-xs-left pl-1">
                                        <span class="font-large-1 text-bold-200"><%= summary.averageBandWidth %></span>
                                    </div>
                                    <div class="float-xs-left mt-1 ml-1">
                                        <span class="grey darken-1 block">KB</span>
                                        <span class="grey darken-1 block">Avg. Bandwidth</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Load</h4>
                        <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>
                    </div>
                    <div class="card-body collapse in">
                        <div class="card-block">
                            <div id="summary-load" class="height-400 echart-container"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Response Time</h4>
                        <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>
                    </div>
                    <div class="card-body collapse in">
                        <div class="card-block">
                            <div id="summary-response" class="height-400 echart-container"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-xs-12 ">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Aggregate Graph</h4>
                        <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>
                    </div>
                    <div class="card-body collapse in">
                        <div class="card-block">
                            <div id="aggregate-graph" class="height-400 echart-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <% } else {
        console.info('else testExecution = ', testExecution);
        if (testExecution && testExecution.length == 0) { %>
            <div class="alert bg-info alert-icon-left alert-dismissible fade in mb-2" role="alert">
                No test has been executed for this project.
            </div>
        <% } else { %>
            <div class="alert bg-info alert-icon-left alert-dismissible fade in mb-2" role="alert">
                Last test execution was not successful.
            </div>
        <% } %>
    <% } %>
</section>